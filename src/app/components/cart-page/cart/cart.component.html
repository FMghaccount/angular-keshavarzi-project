<div class="container-fluid container-md">
  <div
    *ngIf="cartItems?.length === 0"
    class="container border py-3 rounded-2 border-danger border-3 mb-4 mt-5"
  >
    <div
      class="row justify-content-center align-content-center align-items-center flex-column"
    >
      <h4 class="text-center text-danger">سبد خرید شما خالی است</h4>
      <p class="text-center py-4">
        <a routerLink="/" class="btn btn-outline-primary"
          >بازگشت به صفحه اصلی</a
        >
      </p>
    </div>
  </div>
  <div *ngIf="cartItems?.length !== 0" class="container mb-2 mt-5">
    <div class="row text-center">
      <h4>سبد خرید شما</h4>
    </div>
    <div class="row">
      <div class="card mb-3" *ngFor="let item of cartItems; let i = index">
        <div class="row g-0 py-3">
          <div class="col-12 col-sm-5">
            <a
              class="d-block text-center"
              [routerLink]="['/product', item.item.id]"
            >
              <img
                class="product-image py-2"
                height="200px"
                src="{{ item.item.images.split('---')[0] }}"
                alt="{{ item.item.images.split('|')[0] }}"
              />
            </a>
          </div>
          <div
            class="col-sm-7 col-12 d-flex flex-column justify-content-between align-items-center"
          >
            <div class="card-body p-0">
              <ul class="list-unstyled pe-0">
                <li class="mb-1">
                  کالا: {{ item.title.split("|").join(" - ") }}
                </li>
                <li class="mb-1">تعداد: {{ item.amount }}</li>
                <li class="mb-1">قیمت واحد: {{ item.price }} تومان</li>
              </ul>
              <div class="row flex-row">
                <div class="col-6 flex-fill">
                  <button
                    (click)="increaseCartItemAmount(item.item)"
                    class="btn w-100 btn-success d-block m-auto fs-7 mb-2"
                  >
                    +
                  </button>
                </div>
                <div class="col-6 flex-fill">
                  <button
                    (click)="decreaseCartItemAmount(item.item)"
                    class="btn w-100 btn-danger d-block m-auto mb-2"
                  >
                    -
                  </button>
                </div>
                <div class="col-6 flex-fill">
                  <button
                    (click)="removeItemFromBasket(item.item)"
                    class="btn w-100 btn-danger mb-2"
                  >
                    حذف از سبد
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="card mb-3 d-flex flex-column align-items-center p-3 text-success flex-sm-row gap-3 justify-content-between bg-success-subtle"
    *ngIf="cartItems?.length !== 0"
  >
    <div class="d-flex justify-content-between gap-3">
      <div>مبلغ نهایی:</div>
      <div>{{ cart.price }} تومان</div>
    </div>
    <div>
      <button (click)="pay()" class="btn btn-success">پرداخت</button>
    </div>
  </div>
</div>
